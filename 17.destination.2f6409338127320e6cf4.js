webpackJsonp([17],{54:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(1),u=n(14),c=(n(119),n(153)),l=n(154),f=n(9),d=n(68),p={to:d.string.isRequired,containerId:d.string,activeClass:d.string,spy:d.bool,smooth:d.oneOfType([d.bool,d.string]),offset:d.number,delay:d.number,isDynamic:d.bool,onClick:d.func,duration:d.oneOfType([d.number,d.func]),absolute:d.bool,onSetActive:d.func,onSetInactive:d.func,ignoreCancelEvents:d.bool},h={Scroll:function(e,t){var n=t||l,u=function(t){function u(e){i(this,u);var t=o(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e));return t.scrollTo=t.scrollTo.bind(t),t.handleClick=t.handleClick.bind(t),t.spyHandler=t.spyHandler.bind(t),t}return r(u,t),a(u,[{key:"scrollTo",value:function(e,t){n.scrollTo(e,t)}},{key:"handleClick",value:function(e){this.props.onClick&&this.props.onClick(e),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.scrollTo(this.props.to,this.props)}},{key:"spyHandler",value:function(e){var t=n.get(this.props.to);if(t){var i=t.getBoundingClientRect(),o=i.top+e,r=o+i.height,a=e-this.props.offset,s=this.props.to,u=a>=o&&a<=r,l=a<o||a>r,f=n.getActiveLink();l&&f===s?(n.setActiveLink(void 0),this.setState({active:!1}),this.props.onSetInactive&&this.props.onSetInactive()):u&&f!=s&&(n.setActiveLink(s),this.setState({active:!0}),this.props.onSetActive&&this.props.onSetActive(s),c.updateStates())}}},{key:"componentDidMount",value:function(){var e=this.props.containerId,t=e?document.getElementById(e):document;if(c.isMounted(t)||c.mount(t),this.props.spy){var i=this.props.to,o=null,r=0,a=0;this._stateHandler=function(){n.getActiveLink()!=i&&(null!==this.state&&this.state.active&&this.props.onSetInactive&&this.props.onSetInactive(),this.setState({active:!1}))}.bind(this),c.addStateHandler(this._stateHandler),this._spyHandler=function(e){var s=0;if(t.getBoundingClientRect){var u=t.getBoundingClientRect();s=u.top}if(!o||this.props.isDynamic){if(o=n.get(i),!o)return;var l=o.getBoundingClientRect();r=l.top-s+e,a=r+l.height}var f=e-this.props.offset,d=f>=Math.floor(r)&&f<=Math.floor(a),p=f<Math.floor(r)||f>Math.floor(a),h=n.getActiveLink();p&&h===i?(n.setActiveLink(void 0),this.setState({active:!1}),this.props.onSetInactive&&this.props.onSetInactive()):d&&h!=i&&(n.setActiveLink(i),this.setState({active:!0}),this.props.onSetActive&&this.props.onSetActive(i),c.updateStates())}.bind(this),c.addSpyHandler(this._spyHandler,t)}}},{key:"componentWillUnmount",value:function(){c.unmount(this._stateHandler,this._spyHandler)}},{key:"render",value:function(){var t="";t=this.state&&this.state.active?((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():this.props.className;var n=f({},this.props);for(var i in p)n.hasOwnProperty(i)&&delete n[i];return n.className=t,n.onClick=this.handleClick,s.createElement(e,n)}}]),u}(s.Component);return u.propTypes=p,u.defaultProps={offset:0},u},Element:function(e){var t=function(t){function n(e){i(this,n);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.registerElems=t.registerElems.bind(t),t}return r(n,t),a(n,[{key:"componentDidMount",value:function(){this.registerElems(this.props.name)}},{key:"componentWillReceiveProps",value:function(e){this.props.name!==e.name&&this.registerElems(e.name)}},{key:"componentWillUnmount",value:function(){l.unregister(this.props.name)}},{key:"registerElems",value:function(e){var t=u.findDOMNode(this);l.register(e,t)}},{key:"render",value:function(){return s.createElement(e,this.props)}}]),n}(s.Component);return t.propTypes={name:d.string,id:d.string},t}};e.exports=h},119:function(e,t,n){"use strict";var i,o,r,a,s,u,c,l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=n(9),d=n(233),p=n(232),h=n(120),_=function(e){if(l(e.smooth)===Boolean&&e.smooth===!0)return d.defaultEasing;var t=e.smooth;switch(t){case"linear":return d.linear;case"easeInQuad":return d.easeInQuad;case"easeOutQuad":return d.easeOutQuad;case"easeInOutQuad":return d.easeInOutQuad;case"easeInCubic":return d.easeInCubic;case"easeOutCubic":return d.easeOutQuad;case"easeInOutCubic":return d.easeInQuad;case"easeInQuart":return d.easeInQuart;case"easeOutQuart":return d.easeOutQuart;case"easeInOutQuart":return d.easeInOutQuart;case"easeInQuint":return d.easeInQuint;case"easeOutQuint":return d.easeInQuint;case"easeInOutQuint":return d.easeInOutQuint;default:return d.defaultEasing}},m=function(e){return"function"==typeof e?e:function(){return e}},y=function(){if("undefined"!=typeof window)return window.requestAnimationFrame||window.webkitRequestAnimationFrame},v=function(){return y()||function(e,t,n){window.setTimeout(e,n||1e3/60,(new Date).getTime())}}(),S=0,C=0,g=0,E=0,I=0,b=!1,T=function(){if(o)return o.scrollTop;var e=void 0!==window.pageXOffset,t="CSS1Compat"===(document.compatMode||"");return e?window.pageYOffset:t?document.documentElement.scrollTop:document.body.scrollTop},H=function(){if(o)return Math.max(o.scrollHeight,o.offsetHeight,o.clientHeight);var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)},O=function e(t,n){if(b)return void(h.registered.end&&h.registered.end(r,i,S));if(s=Math.round(g-C),null===a&&(a=n),E=n-a,u=E>=I?1:t(E/I),S=C+Math.ceil(s*u),o?o.scrollTop=S:window.scrollTo(0,S),u<1){var c=e.bind(null,t);return void v.call(window,c)}h.registered.end&&h.registered.end(r,i,S)},N=function(e){return e&&e.containerId?void(o=document.getElementById(e.containerId)):void(o=null)},w=function(e,t,n,o){window.clearTimeout(c),t.ignoreCancelEvents||p.register(function(){b=!0}),N(t),a=null,b=!1,C=T(),g=t.absolute?e:e+C,s=Math.round(g-C),I=m(t.duration)(s),I=isNaN(parseFloat(I))?1e3:parseFloat(I),r=n,i=o;var u=_(t),l=O.bind(null,u);return t&&t.delay>0?void(c=window.setTimeout(function(){v.call(window,l)},t.delay)):void v.call(window,l)},k=function(e){w(0,f(e||{},{absolute:!0}))},L=function(e,t){w(e,f(t||{},{absolute:!0}))},D=function(e){N(e),w(H(),f(e||{},{absolute:!0}))},A=function(e,t){N(t),w(T()+e,f(t||{},{absolute:!0}))};e.exports={animateTopScroll:w,getAnimationType:_,scrollToTop:k,scrollToBottom:D,scrollTo:L,scrollMore:A}},120:function(e,t){"use strict";var n={registered:{},scrollEvent:{register:function(e,t){n.registered[e]=t},remove:function(e){n.registered[e]=null}}};e.exports=n},151:function(e,t,n){"use strict";t.Link=n(231),t.Button=n(229),t.Element=n(230),t.Helpers=n(54),t.scroller=n(154),t.Events=n(120),t.scrollSpy=n(153),t.animateScroll=n(119)},152:function(e,t){"use strict";var n=function(e,t,n){var i=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}();e.addEventListener(t,n,!!i&&{passive:!0})};e.exports=n},153:function(e,t,n){"use strict";var i=n(152),o=function(e){var t;return function(n){t||(t=setTimeout(function(){t=null,e(n)},66))}},r={spyCallbacks:[],spySetState:[],scrollSpyContainers:[],mount:function(e){var t=this;if(e){var n=o(function(n){t.scrollHandler(e)});this.scrollSpyContainers.push(e),i(e,"scroll",n)}},isMounted:function(e){return this.scrollSpyContainers.indexOf(e)!==-1},currentPositionY:function(e){if(e===document){var t=void 0!==window.pageXOffset,n="CSS1Compat"===(document.compatMode||"");return t?window.pageYOffset:n?document.documentElement.scrollTop:document.body.scrollTop}return e.scrollTop},scrollHandler:function(e){var t=this.scrollSpyContainers[this.scrollSpyContainers.indexOf(e)].spyCallbacks;if(t)for(var n=0;n<t.length;n++){this.currentPositionY(e);t[n](this.currentPositionY(e))}},addStateHandler:function(e){this.spySetState.push(e)},addSpyHandler:function(e,t){var n=this.scrollSpyContainers[this.scrollSpyContainers.indexOf(t)];n.spyCallbacks||(n.spyCallbacks=[]),n.spyCallbacks.push(e)},updateStates:function(){for(var e=this.spySetState.length,t=0;t<e;t++)this.spySetState[t]()},unmount:function(e,t){for(var n=0;n<this.scrollSpyContainers.length;n++){var i=this.scrollSpyContainers[n].spyCallbacks;i&&i.length&&i.splice(i.indexOf(t),1)}this.spySetState&&this.spySetState.length&&this.spySetState.splice(this.spySetState.indexOf(e),1),document.removeEventListener("scroll",this.scrollHandler)},update:function(){for(var e=0;e<this.scrollSpyContainers.length;e++)this.scrollHandler(this.scrollSpyContainers[e])}};e.exports=r},154:function(e,t,n){"use strict";var i,o=n(9),r=n(119),a=n(120),s={};e.exports={unmount:function(){s={}},register:function(e,t){s[e]=t},unregister:function(e){delete s[e]},get:function(e){return s[e]||document.getElementById(e)},setActiveLink:function(e){i=e},getActiveLink:function(){return i},scrollTo:function(e,t){var n=this.get(e);if(!n)return void console.warn("target Element not found");t=o({},t,{absolute:!1}),a.registered.begin&&a.registered.begin(e,n);var i,s=t.containerId,u=s?document.getElementById(s):null;if(s&&u){if(t.absolute=!0,u!==n.offsetParent)throw u.contains(n)?new Error("Container with ID "+s+" is not a positioned element"):new Error("Container with ID "+s+" is not a parent of target "+e);i=n.offsetTop}else{var c=n.getBoundingClientRect();i=c.top}if(i+=t.offset||0,!t.smooth){if(s&&u)u.scrollTop=i;else{var l=document.body.getBoundingClientRect();window.scrollTo(0,i-l.top)}return void(a.registered.end&&a.registered.end(e,n))}r.animateTopScroll(i,t,e,n)}}},229:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(1),u=n(54),c=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),a(t,[{key:"render",value:function(){return s.DOM.input(this.props,this.props.children)}}]),t}(s.Component);e.exports=u.Scroll(c)},230:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(1),u=n(54),c=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),a(t,[{key:"render",value:function(){return s.DOM.div(this.props,this.props.children)}}]),t}(s.Component);e.exports=u.Element(c)},231:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(1),u=n(54),c=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),a(t,[{key:"render",value:function(){return s.DOM.a(this.props,this.props.children)}}]),t}(s.Component);e.exports=u.Scroll(c)},232:function(e,t,n){"use strict";var i=n(152),o=["mousedown","mousewheel","touchmove","keydown"];e.exports={register:function(e){if("undefined"!=typeof document)for(var t=0;t<o.length;t+=1)i(document,o[t],e)}}},233:function(e,t){"use strict";e.exports={defaultEasing:function(e){return e<.5?Math.pow(2*e,2)/2:1-Math.pow(2*(1-e),2)/2},linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:-1+(4-2*e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}}},255:function(e,t){e.exports={searchHomeContainer:"Home__searchHomeContainer___3wxni",searchBox:"Home__searchBox___1CF7j",searchBoxInput:"Home__searchBoxInput___2sG3i",focusClose:"Home__focusClose___ikrrj",cancel:"Home__cancel___deFZA",history:"Home__history___3B-79",historyItem:"Home__historyItem___kciPi",recommond:"Home__recommond___3QWsw",recommondHeader:"Home__recommondHeader___jabsn",recommondContainer:"Home__recommondContainer___1gtHd",recommondItem:"Home__recommondItem___2FD5P",cityList:"Home__cityList___2Y-6m",cityListHeader:"Home__cityListHeader___1QV9H",cityListNav:"Home__cityListNav___15jE3",cityListNavItem:"Home__cityListNavItem___3j3kg",cityListNavItemInvalid:"Home__cityListNavItemInvalid___2k5hX",cityListItemHeader:"Home__cityListItemHeader___21z4c",cityListItemHeaderItem:"Home__cityListItemHeaderItem___1mmsS",cityListItemContainer:"Home__cityListItemContainer___3cRzv",cityItem:"Home__cityItem___1BTpL",destinationListContainer:"Home__destinationListContainer___3nLkH",destinationListItem:"Home__destinationListItem___qN0jL"}},286:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),r=i(o),a=n(2),s=i(a),u=n(12),c=i(u),l=n(4),f=i(l),d=n(3),p=i(d),h=n(1),_=i(h),m=n(18),y=n(255),v=i(y),S=function(e){function t(){return(0,s.default)(this,t),(0,f.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.options,i=t.setHistories,o=n.map(function(t,n){return"landmark"===t.placeable_type?_.default.createElement("li",{className:v.default.destinationListItem,key:n},_.default.createElement(m.Link,{to:{pathname:"/"+t.offer_destination.slug,search:"?landmark_id="+t.placeable_id,state:{source:"首页&搜索",category:"首页&搜索"}},onClick:i.bind(e,t.name,t.offer_destination.slug,t.placeable_id)},t.name,",",t.offer_destination.name,",",t.country.name)):"offer_destination"===t.placeable_type?_.default.createElement("li",{className:v.default.destinationListItem,key:n},_.default.createElement(m.Link,{to:{pathname:"/"+t.slug,state:{source:"首页&搜索",category:"首页&搜索"}},onClick:i.bind(e,t.name,t.slug,"")},t.name,",",t.country.name)):_.default.createElement("li",{className:v.default.destinationListItem,key:n},_.default.createElement(m.Link,{to:{pathname:"/"+t.slug,state:{source:"首页&搜索",category:"首页&搜索"}},onClick:i.bind(e,t.name,t.slug,"")},t.name))});return _.default.createElement("div",{className:v.default.destinationListContainer,style:{display:this.props.listShow}},_.default.createElement("ul",null,o))}}]),t}(h.Component);S.propTypes={options:_.default.PropTypes.array.isRequired,setHistories:_.default.PropTypes.func.isRequired,listShow:_.default.PropTypes.string.isRequired},t.default=S},480:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(){return(0,d.default)({},p.CALL_API,{endpoint:_.default.api_root_v3+"/suggests/entrance",method:"GET",headers:_.default.headers,types:[m,{type:y,payload:function(e,t,n){return n.json()}},v]})}function r(){return(0,d.default)({},p.CALL_API,{endpoint:_.default.api_root_v1+"/search/destinations",method:"GET",headers:_.default.headers,types:[S,{type:C,payload:function(e,t,n){return n.json()}},g]})}function a(e){return(0,d.default)({},p.CALL_API,{endpoint:_.default.api_root_v1+"/search/complete?&q="+e,method:"GET",headers:_.default.headers,types:[E,{type:I,payload:function(e,t,n){return n.json()}},b]})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments[1],n=T[t.type];return n?n(e,t):e}Object.defineProperty(t,"__esModule",{value:!0}),t.actions=t.SEARCH_DESTINATIONS_FAILURE=t.SEARCH_DESTINATIONS_SUCCESS=t.SEARCH_DESTINATIONS_REQUEST=t.FETCH_DESTINATIONS_FAILURE=t.FETCH_DESTINATIONS_SUCCESS=t.FETCH_DESTINATIONS_REQUEST=t.FETCH_HOTREGIONS_FAILURE=t.FETCH_HOTREGIONS_SUCCESS=t.FETCH_HOTREGIONS_REQUEST=void 0;var u,c=n(6),l=i(c),f=n(8),d=i(f);t.fetchHotRegions=o,t.fetchDestinations=r,t.searchDestinations=a,t.default=s;var p=n(41),h=n(29),_=i(h),m=t.FETCH_HOTREGIONS_REQUEST="FETCH_HOTREGIONS_REQUEST",y=t.FETCH_HOTREGIONS_SUCCESS="FETCH_HOTREGIONS_SUCCESS",v=t.FETCH_HOTREGIONS_FAILURE="FETCH_HOTREGIONS_FAILURE",S=t.FETCH_DESTINATIONS_REQUEST="FETCH_DESTINATIONS_REQUEST",C=t.FETCH_DESTINATIONS_SUCCESS="FETCH_DESTINATIONS_SUCCESS",g=t.FETCH_DESTINATIONS_FAILURE="FETCH_DESTINATIONS_FAILURE",E=t.SEARCH_DESTINATIONS_REQUEST="SEARCH_DESTINATIONS_REQUEST",I=t.SEARCH_DESTINATIONS_SUCCESS="SEARCH_DESTINATIONS_SUCCESS",b=t.SEARCH_DESTINATIONS_FAILURE="SEARCH_DESTINATIONS_FAILURE",T=(t.actions={fetchHotRegions:o,fetchDestinations:r,searchDestinations:a},u={},(0,d.default)(u,m,function(e,t){return(0,l.default)({},e,{isFetching:!0})}),(0,d.default)(u,y,function(e,t){return(0,l.default)({},e,{desValues:{error:{},isFetching:!1,items:t.payload}})}),(0,d.default)(u,v,function(e,t){return(0,l.default)({},e,{isFetching:!1})}),(0,d.default)(u,S,function(e,t){return(0,l.default)({},e,{fetchValues:{error:{},isFetching:!0,items:[]}})}),(0,d.default)(u,C,function(e,t){return(0,l.default)({},e,{fetchValues:{error:{},isFetching:!1,items:t.payload}})}),(0,d.default)(u,g,function(e,t){return(0,l.default)({},e,{fetchValues:{error:{},isFetching:!1}})}),(0,d.default)(u,E,function(e,t){return(0,l.default)({},e,{searchValues:{error:{},isFetching:!0,values:[]}})}),(0,d.default)(u,I,function(e,t){return(0,l.default)({},e,{searchValues:{error:{},isFetching:!1,values:t.payload}})}),(0,d.default)(u,b,function(e,t){return(0,l.default)({},e,{searchValues:{error:{},isFetching:!1}})}),u),H={hotValues:{isFetching:!1,items:[],error:{}},fetchValues:{isFetching:!1,items:[],error:{}},searchValues:{isFetching:!1,values:[],error:{}}}},764:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(47),r=i(o),a=n(11),s=i(a),u=n(2),c=i(u),l=n(12),f=i(l),d=n(4),p=i(d),h=n(3),_=i(h),m=n(20),y=i(m),v=n(1),S=i(v),C=n(18),g=n(17),E=i(g),I=n(151),b=i(I),T=n(44),H=i(T),O=n(1130),N=i(O),w=n(286),k=i(w),L=b.default.Link,D=b.default.Element,A=n(126),R=function(e){function t(e){(0,c.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.clearSearchInput=n.clearSearchInput.bind(n),n.setHistories=n.setHistories.bind(n),n.handleChange=n.handleChange.bind(n),n.setHotCities=n.setHotCities.bind(n),n.openSearchDestination=n.openSearchDestination.bind(n),n.searchFrom=n.searchFrom.bind(n),n.state={iconShow:"none",SearchDestinationList:"none",destinationValue:"",searchDestinationShow:"none",typeahead:"none"},n}return(0,_.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.setTitle;this.props.fetchHotRegions(),this.props.fetchDestinations(),this.props.searchDestinations(),e("全部目的地")}},{key:"handleChange",value:function(e){this.setState({typeahead:"none"}),e.target.value.length>0?(this.setState({iconShow:"block",SearchDestinationList:"block",destinationValue:e.target.value}),this.props.searchDestinations(e.target.value),this.openSearchDestination()):this.setState({iconShow:"none",SearchDestinationList:"none",destinationValue:e.target.value})}},{key:"toSortCities",value:function(e){for(var t={},n=0;n<26;n++){var i=[];e.map(function(e){e.flopy===String.fromCharCode(65+n)&&(t[String.fromCharCode(65+n)]=[],i.push(e),t[String.fromCharCode(65+n)].push(i),t[String.fromCharCode(65+n)]=A.flatten(t[String.fromCharCode(65+n)]))})}return t}},{key:"setHotCities",value:function(e){var t=[];return e.map(function(e){t.push(e.country),e.cities.map(function(e){t.push(e)})}),t=A.sortBy(t,"suggest"),t=A.last(t,11)}},{key:"toCities",value:function(e){var t=[];return e.map(function(e){t.push(e.cities)}),t=A.flatten(t)}},{key:"setHistories",value:function(e,t,n){var i=[],o={};E.default.load("histories")&&(i=E.default.load("histories")),i.length>0&&i.map(function(e,n){e.e===t&&i.splice(n,1)}),o={n:e,e:t,id:n},i.unshift(o),E.default.save("histories",i,{maxAge:2592e3})}},{key:"openSearchDestination",value:function(){this.setState({searchDestinationShow:"block"})}},{key:"clearSearchInput",value:function(e){this.setState({destinationValue:"",iconShow:"none",SearchDestinationList:"none",typeahead:"none"})}},{key:"searchFrom",value:function(e,t){""===t&&(e.preventDefault(),r.default.success("未找到搜索结果",.9))}},{key:"render",value:function(){var e=this,t=this.props.destination,n=t.desValues,i=t.fetchValues,o=t.searchValues,r=o.values,a=r.results,s=i.items,u=[];if(!(0,y.default)(n))for(var c=n.items[1].items,l=0;l<c.length;l++){var f=c[l].url.substring(c[l].url.indexOf("uid=")+4,c[l].url.length);u.push({image_url:c[l].image_url,title:c[l].title,url:f})}var d=void 0;if(r.meta&&r.meta.q===this.state.destinationValue&&(d=a,d.length<0&&this.setState({typeahead:"none"})),s.length>0){for(var p=this.toCities(s),h=this.toSortCities(p),_=[],m=0;m<26;m++)_.push(m);var v=_.map(function(t){return S.default.createElement(D,{key:t,name:"list"+t},S.default.createElement("div",{className:N.default.cityListItemHeader},S.default.createElement("a",{href:"#",className:N.default.cityListItemHeaderItem},String.fromCharCode(65+t))),S.default.createElement("div",{className:N.default.cityListItemContainer},!(0,y.default)(s)&&!(0,y.default)(h[String.fromCharCode(65+t)])&&h[String.fromCharCode(65+t)].map(function(t,n){return S.default.createElement(C.Link,{to:{pathname:"/"+t.uid,state:{source:"全部目的地&搜索",category:"全部目的地&搜索",place:s.name}},className:N.default.cityItem,key:n,onClick:e.setHistories.bind(e,t.zh,t.uid,"")},t.zh)})))}),g=_.map(function(e){return(0,y.default)(h[String.fromCharCode(65+e)])?S.default.createElement(L,{to:"list"+e,className:N.default.cityListNavItemInvalid,key:e,spy:!0,smooth:!0,duration:500},String.fromCharCode(65+e)):S.default.createElement(L,{to:"list"+e,className:N.default.cityListNavItem,key:e,spy:!0,smooth:!0,duration:500},String.fromCharCode(65+e))})}var E="",I="";return(0,y.default)(d)||(E=S.default.createElement(k.default,{setHistories:this.setHistories,options:d,listShow:this.state.SearchDestinationList}),I=d[0].slug||d[0].offer_destination.slug||""),S.default.createElement("div",{className:N.default.destinationContainer},S.default.createElement(H.default,{title:"全部目的地 - 住百家",meta:[{name:"keywords",content:"全部目的地，住百家，短租公寓，家庭旅馆，海外短租，公寓短租，民宿"},{name:"description",content:"全部目的地"}]}),S.default.createElement("div",{className:N.default.search},S.default.createElement("form",{action:"/"+I,method:"get",onSubmit:function(t){return e.searchFrom(t,I)}},S.default.createElement("input",{type:"text",className:N.default.searchInput,placeholder:"搜索国家/城市/景点",value:this.state.destinationValue,onChange:this.handleChange}),S.default.createElement("div",{className:N.default.searchCloseContainer,style:{display:this.state.iconShow},onClick:this.clearSearchInput},S.default.createElement("span",{className:N.default.searchClose})),S.default.createElement("input",{className:N.default.searchCancel,type:"submit",value:"搜索",onSubmit:function(t){return e.searchFrom(t,I)}}))),!(0,y.default)(d)&&S.default.createElement("div",{className:N.default.destinationList,style:{display:this.state.searchDestinationShow}},E),S.default.createElement("div",{className:N.default.hotArea},"热门目的地"),!(0,y.default)(n)&&S.default.createElement("div",{className:N.default.hotAreaContainer},u.map(function(e,t){return S.default.createElement(C.Link,{to:{pathname:"/"+e.url,state:{source:"全部目的地&搜索",category:"全部目的地&搜索",place:s.name}},className:N.default.areaCity,key:t},S.default.createElement("div",{className:N.default.title},e.title),S.default.createElement("div",{className:N.default.mask}),S.default.createElement("img",{className:N.default.img,src:e.image_url}))})),S.default.createElement("div",{className:N.default.cityList},S.default.createElement("div",{className:N.default.cityListHeader},"全部目的地"),S.default.createElement("div",{className:N.default.cityListNav},g),!(0,y.default)(s)&&v))}}]),t}(v.Component);R.propTypes={destination:S.default.PropTypes.object.isRequired,searchDestinations:S.default.PropTypes.func.isRequired,fetchDestinations:S.default.PropTypes.func.isRequired,fetchHotRegions:S.default.PropTypes.func.isRequired},t.default=R},765:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(28),r=n(480),a=n(764),s=i(a),u=n(42),c={fetchHotRegions:r.fetchHotRegions,fetchDestinations:r.fetchDestinations,searchDestinations:r.searchDestinations,setTitle:u.setTitle},l=function(e){return{destination:e.destination}};t.default=(0,o.connect)(l,c)(s.default)},1130:function(e,t){e.exports={destinationContainer:"Destination__destinationContainer___1pgbr",search:"Destination__search___3qPyZ",searchInput:"Destination__searchInput___19aLt",searchCloseContainer:"Destination__searchCloseContainer___hubNI",searchClose:"Destination__searchClose___3j92G",searchCancel:"Destination__searchCancel___3VlEE",hotArea:"Destination__hotArea___KUt7z",hotAreaContainer:"Destination__hotAreaContainer___1yHIk",areaCity:"Destination__areaCity___31N8D",title:"Destination__title___1oAj6",mask:"Destination__mask___2b_KX",img:"Destination__img___2X1VQ",cityList:"Destination__cityList___1iZkk",cityListHeader:"Destination__cityListHeader___3K2OI",cityListNav:"Destination__cityListNav___2_uMv",cityListNavItem:"Destination__cityListNavItem___1l7D5",cityListNavItemInvalid:"Destination__cityListNavItemInvalid___1N8ZO",cityListItemHeader:"Destination__cityListItemHeader___3F85j",cityListItemContainer:"Destination__cityListItemContainer___3W-aa",cityItem:"Destination__cityItem___1xzlB",destinationList:"Destination__destinationList___3Kxpp"}}});