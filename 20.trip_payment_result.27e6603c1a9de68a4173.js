webpackJsonp([20],{478:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=_.default.load("token")||window.ZBJ.access_token,a=m.extend(d.default.headers,{Authorization:"Bearer "+t});return(0,c.default)({},f.CALL_API,{endpoint:d.default.api_root_v1+"/service_charges/"+e,method:"GET",headers:a,types:[E,{type:h,payload:function(e,t,a){return a.json()}},C]})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments[1],a=g[t.type];return a?a(e,t):e}Object.defineProperty(t,"__esModule",{value:!0}),t.actions=t.FETCH_SERVICECHARGES_FAILURE=t.FETCH_SERVICECHARGES_SUCCESS=t.FETCH_SERVICECHARGES_REQUEST=void 0;var o,s=a(6),u=n(s),i=a(8),c=n(i);t.fetchServiceCharges=r,t.default=l;var f=a(41),p=a(29),d=n(p),y=a(17),_=n(y),m=a(126),E=t.FETCH_SERVICECHARGES_REQUEST="FETCH_SERVICECHARGES_REQUEST",h=t.FETCH_SERVICECHARGES_SUCCESS="FETCH_SERVICECHARGES_SUCCESS",C=t.FETCH_SERVICECHARGES_FAILURE="FETCH_SERVICECHARGES_FAILURE",g=(t.actions={fetchServiceCharges:r},o={},(0,c.default)(o,E,function(e,t){return(0,u.default)({},e,{isFetching:!0,isReturn:!0,error:{},info:{}})}),(0,c.default)(o,h,function(e,t){return(0,u.default)({},e,{isFetching:!1,isReturn:!1,error:{},lastUpdate:Date.now(),info:t.payload})}),(0,c.default)(o,C,function(e,t){return(0,u.default)({},e,{isFetching:!1,isReturn:!1,error:{},info:{}})}),o),v={isFetching:!1,isReturn:!0,error:{},info:{}}},745:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(47),l=n(r),o=a(11),s=n(o),u=a(2),i=n(u),c=a(12),f=n(c),p=a(4),d=n(p),y=a(3),_=n(y),m=a(51),E=n(m),h=a(1),C=n(h),g=a(18),v=a(1353),b=n(v),R=a(44),S=n(R),w=a(121),k=a(1125),x=n(k),T=a(15),A=function(e){function t(e,a){(0,i.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e,a));return n.state={statusDisplay:0},n}return(0,_.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchServiceCharges,a=e.params,n=e.user;n.signed?"wifi2"===a.bill_no?((0,T.saPageView)("","一日游","wifi2领取成功"),this.setState({statusDisplay:2})):t(a.bill_no):this.context.router.push("/users/sign_in?s=trip")}},{key:"componentWillReceiveProps",value:function(e){var t=e.paymentResult,a=t.info,n=t.isReturn,r=a.category,o=a.status;if(e.user.signed&&"wifi2"===e.params.bill_no)return void this.setState({statusDisplay:2});if(!n&&("status_pending"===o||"status_failed"===o||"status_closed"===o))switch(l.default.info("支付失败",5),r){case"category_day_trip_fuji":this.context.router.push("/day_trip/fiji");break;case"category_day_trip_tokyo_day":this.context.router.push("/day_trip/tokyo1");break;case"category_day_trip_tokyo_half":this.context.router.push("/day_trip/tokyo2");break;case"category_day_trip_wifi_2":this.context.router.push("/day_trip/wifi2");break;case"category_day_trip_wifi_5":this.context.router.push("/day_trip/wifi5");break;case"category_day_trip_bag":this.context.router.push("/day_trip/luggage");break;default:this.context.router.push("/day_trip")}switch(!n&&(0,E.default)(a.status)&&"wifi2"!==e.params.bill_no&&(l.default.info("订单不存在",5),this.context.router.push("/day_trip")),r){case"category_day_trip_fuji":this.setState({statusDisplay:1});break;case"category_day_trip_tokyo_day":this.setState({statusDisplay:1});break;case"category_day_trip_tokyo_half":this.setState({statusDisplay:1});break;case"category_day_trip_wifi_2":this.setState({statusDisplay:2});break;case"category_day_trip_wifi_5":this.setState({statusDisplay:3});break;case"category_day_trip_bag":this.setState({statusDisplay:4});break;default:this.setState({statusDisplay:1})}}},{key:"copy",value:function(){l.default.info("复制成功",2)}},{key:"render",value:function(){var e=this,t=this.props.paymentResult,a=t.info;a.category;return C.default.createElement("div",{className:x.default.paymentResultContain},"alipay"===(0,w.browserType)()&&C.default.createElement(S.default,{title:"住百家"}),1===this.state.statusDisplay&&C.default.createElement("div",{className:x.default.city},C.default.createElement("div",{className:x.default.paymentExplain},C.default.createElement("p",null,"支付成功"),C.default.createElement("span",null,"工作人员会在工作日48小时内与您联"),C.default.createElement("span",null,"系并确认行程，请保持手机畅通！"),C.default.createElement("span",null,"如有问题请致电住百家24小时服务热线:"),C.default.createElement("s",null,"400-012-3901")),C.default.createElement(g.Link,{to:"/",className:x.default.paymenBtn},"返回首页")),2===this.state.statusDisplay&&C.default.createElement("div",{className:x.default.wifi},C.default.createElement("div",{className:x.default.paymentExplain},C.default.createElement("p",null,"领取成功"),C.default.createElement("span",null,"您的优惠码是：HQMYZBJQ"),C.default.createElement("span",null,"搜索支付宝生活号“环球漫游”进行预订"),C.default.createElement("span",null,"结算时使用优惠码进行支付结算。"),C.default.createElement("span",null,"如有问题请致电住百家24小时服务热线:"),C.default.createElement("s",null,"400-012-3901")),C.default.createElement(g.Link,{to:"/",className:x.default.paymenBtn},"返回首页"),C.default.createElement(b.default,{text:"HQMYZBJQ",onCopy:function(){return e.copy()}},C.default.createElement("p",{className:x.default.copyBtn},"复制优惠码"))),3===this.state.statusDisplay&&C.default.createElement("div",{className:x.default.bag},C.default.createElement("div",{className:x.default.paymentExplain},C.default.createElement("p",null,"支付成功"),C.default.createElement("span",null,"支付完成后关注支付宝生活号:“住百家”"),C.default.createElement("span",null,"后台留言“wifi”进行后续服务。"),C.default.createElement("span",null,"如有问题请致电住百家24小时服务热线:"),C.default.createElement("s",null,"400-012-3901")),C.default.createElement(g.Link,{to:"/",className:x.default.paymenBtn},"返回首页"),C.default.createElement(b.default,{text:"住百家",onCopy:function(){return e.copy()}},C.default.createElement("p",{className:x.default.copyBtn},"复制生活号"))),4===this.state.statusDisplay&&C.default.createElement("div",{className:x.default.bag},C.default.createElement("div",{className:x.default.paymentExplain},C.default.createElement("p",null,"支付成功"),C.default.createElement("span",null,"支付完成后关注支付宝生活号:“住百家”"),C.default.createElement("span",null,"后台留言“行李”进行后续服务。"),C.default.createElement("span",null,"如有问题请致电住百家24小时服务热线:"),C.default.createElement("s",null,"400-012-3901")),C.default.createElement(g.Link,{to:"/",className:x.default.paymenBtn},"返回首页"),C.default.createElement(b.default,{text:"住百家",onCopy:function(){return e.copy()}},C.default.createElement("p",{className:x.default.copyBtn},"复制生活号"))))}}]),t}(h.Component);A.contextTypes={router:C.default.PropTypes.object.isRequired},t.default=A},746:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(28),l=a(478),o=a(42),s=a(745),u=n(s),i={fetchServiceCharges:l.fetchServiceCharges,setTitle:o.setTitle},c=function(e){return{paymentResult:e.paymentResult,user:e.user}};t.default=(0,r.connect)(c,i)(u.default)},866:function(e,t,a){"use strict";function n(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function r(e,t){var a,r,s,u,i,c,f=!1;t||(t={}),a=t.debug||!1;try{s=l(),u=document.createRange(),i=document.getSelection(),c=document.createElement("span"),c.textContent=e,c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",document.body.appendChild(c),u.selectNode(c),i.addRange(u);var p=document.execCommand("copy");if(!p)throw new Error("copy command was unsuccessful");f=!0}catch(l){a&&console.error("unable to copy using execCommand: ",l),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData("text",e),f=!0}catch(l){a&&console.error("unable to copy using clipboardData: ",l),a&&console.error("falling back to prompt"),r=n("message"in t?t.message:o),window.prompt(r,e)}}finally{i&&("function"==typeof i.removeRange?i.removeRange(u):i.removeAllRanges()),c&&document.body.removeChild(c),s()}return f}var l=a(1561),o="Copy to clipboard: #{key}, Enter";e.exports=r},1125:function(e,t){e.exports={paymentResultContain:"PaymentResult__paymentResultContain___3KRnU",city:"PaymentResult__city___SPfWR",paymentExplain:"PaymentResult__paymentExplain___hfW42",paymenBtn:"PaymentResult__paymenBtn___1S7sp",wifi:"PaymentResult__wifi___Fi2gv",copyBtn:"PaymentResult__copyBtn___3RRA8",bag:"PaymentResult__bag___1Glwu"}},1352:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CopyToClipboard=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(1),f=n(c),p=a(866),d=n(p);t.CopyToClipboard=function(e){function t(){var e,a,n,r;l(this,t);for(var s=arguments.length,u=Array(s),i=0;i<s;i++)u[i]=arguments[i];return a=n=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.onClick=function(e){var t=n.props,a=t.text,r=t.onCopy,l=t.children,o=t.options,s=f.default.Children.only(l),u=(0,d.default)(a,o);r&&r(a,u),s&&s.props&&"function"==typeof s.props.onClick&&s.props.onClick(e)},r=a,o(n,r)}return s(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=(e.text,e.onCopy,e.options,e.children),a=r(e,["text","onCopy","options","children"]),n=f.default.Children.only(t);return f.default.cloneElement(n,u({},a,{onClick:this.onClick}))}}]),t}(f.default.PureComponent)},1353:function(e,t,a){"use strict";var n=a(1352),r=n.CopyToClipboard;e.exports=r},1561:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,a=[],n=0;n<e.rangeCount;n++)a.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||a.forEach(function(t){e.addRange(t)}),t&&t.focus()}}}});